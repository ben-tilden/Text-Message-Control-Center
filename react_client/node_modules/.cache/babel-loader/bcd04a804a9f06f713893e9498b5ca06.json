{"ast":null,"code":"var _jsxFileName = \"/Users/bentilden/Documents/GitHub/TextMessageControlCenterReact/src/App.js\";\nimport React from 'react';\nimport logo from \"./logo.svg\";\nimport './App.css';\nimport Headroom from \"react-headroom\";\nimport InfiniteScroll from \"react-infinite-scroller\";\nconst api = {\n  baseUrl: 'https://api.twilio.com'\n}; // Class for sent messages\n\nclass SentMessages extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      allMessages: [],\n      nextPage: null,\n      hasMoreItems: true\n    };\n  } // Loads first page of messages\n\n\n  componentDidMount() {\n    fetch('/messages').then(res => res.json()).then(res => this.setState({\n      allMessages: res.messages,\n      nextPage: res.next_page_uri\n    })).catch(err => this.setState({\n      loaded: true\n    }));\n  } // Load more pages for Infinite Scroll\n\n\n  loadNextPage(page) {\n    var self = this;\n    let nextPageUrl = \"\";\n\n    if (this.state.nextPage) {\n      nextPageUrl = api.baseUrl + this.state.nextPage;\n    }\n\n    const obj = {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        url: nextPageUrl\n      })\n    };\n    fetch('/messages', obj).then(res => res.json()).then(res => {\n      if (res) {\n        var updatedMessages = self.state.allMessages;\n        res.messages.map(message => {\n          updatedMessages.push(message);\n        });\n\n        if (res.nextPage) {\n          self.setState({\n            allMessages: updatedMessages,\n            nextPage: res.nextPage\n          });\n        } else {\n          self.setState({\n            hasMoreItems: false\n          });\n        }\n      }\n    }).catch(err => {\n      console.log(err);\n    });\n  }\n\n  render() {\n    const loader = React.createElement(\"p\", {\n      className: \"loader\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73\n      },\n      __self: this\n    }, \"Loading messages...\");\n    var items = [];\n    this.state.allMessages.map(message => {\n      items.push(React.createElement(\"div\", {\n        key: message.id,\n        className: \"message\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 78\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        className: \"body\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79\n        },\n        __self: this\n      }, message.body), React.createElement(\"p\", {\n        className: \"date\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 80\n        },\n        __self: this\n      }, message.date_sent.slice(0, -9)), React.createElement(\"p\", {\n        className: \"rec\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 81\n        },\n        __self: this\n      }, message.to)));\n      return items;\n    });\n    return React.createElement(InfiniteScroll, {\n      pageStart: 0,\n      loadMore: this.loadNextPage.bind(this),\n      hasMore: this.state.hasMoreItems,\n      loader: loader,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"messageFeed\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94\n      },\n      __self: this\n    }, items));\n  }\n\n} // Return app\n\n\nfunction App() {\n  return React.createElement(\"div\", {\n    className: \"App\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105\n    },\n    __self: this\n  }, React.createElement(Headroom, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"App-header\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107\n    },\n    __self: this\n  }, React.createElement(\"img\", {\n    src: logo,\n    className: \"App-logo\",\n    alt: \"logo\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108\n    },\n    __self: this\n  }), React.createElement(\"h1\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109\n    },\n    __self: this\n  }, \"Mantra Health\"))), React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112\n    },\n    __self: this\n  }, React.createElement(\"h2\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113\n    },\n    __self: this\n  }, \"Messages\"), React.createElement(SentMessages, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114\n    },\n    __self: this\n  })));\n}\n\nexport default App;","map":{"version":3,"sources":["/Users/bentilden/Documents/GitHub/TextMessageControlCenterReact/src/App.js"],"names":["React","Headroom","InfiniteScroll","api","baseUrl","SentMessages","Component","constructor","props","state","allMessages","nextPage","hasMoreItems","componentDidMount","fetch","then","res","json","setState","messages","next_page_uri","catch","err","loaded","loadNextPage","page","self","nextPageUrl","obj","method","headers","body","JSON","stringify","url","updatedMessages","map","message","push","console","log","render","loader","items","id","date_sent","slice","to","bind","App","logo"],"mappings":"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","sourcesContent":["import React from 'react';\nimport logo from './logo.svg';\nimport './App.css';\nimport Headroom from \"react-headroom\";\nimport InfiniteScroll from \"react-infinite-scroller\";\n\nconst api = {\n  baseUrl: 'https://api.twilio.com'\n};\n\n// Class for sent messages\nclass SentMessages extends React.Component {\n  constructor(props) {\n      super(props);\n      this.state = {\n        allMessages: [],\n        nextPage: null,\n        hasMoreItems: true\n      }\n  }\n\n  // Loads first page of messages\n  componentDidMount() {\n    fetch('/messages')\n      .then(res => res.json())\n      .then(res => this.setState({\n              allMessages: res.messages,\n              nextPage: res.next_page_uri\n            }))\n      .catch((err) => this.setState({ loaded: true }));\n  }\n\n  // Load more pages for Infinite Scroll\n  loadNextPage(page) {\n    var self = this;\n    let nextPageUrl = \"\";\n    if (this.state.nextPage) {\n      nextPageUrl = api.baseUrl + this.state.nextPage;\n    }\n    const obj = {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        url : nextPageUrl\n      })\n    };\n    fetch('/messages', obj)\n      .then(res => res.json())\n      .then(res => {\n        if (res) {\n          var updatedMessages = self.state.allMessages;\n          res.messages.map(message => {\n            updatedMessages.push(message);\n          })\n          if (res.nextPage) {\n            self.setState({\n              allMessages: updatedMessages,\n              nextPage: res.nextPage\n            });\n          } else {\n            self.setState({\n              hasMoreItems: false\n            });\n          }\n        }\n      })\n      .catch((err) => {console.log(err);});\n  }\n\n  render() {\n    const loader = <p className=\"loader\">Loading messages...</p>;\n\n    var items = [];\n    this.state.allMessages.map(message => {\n      items.push(\n        <div key={message.id} className=\"message\">\n        <p className=\"body\">{message.body}</p>\n        <p className=\"date\">{message.date_sent.slice(0, -9)}</p>\n        <p className=\"rec\">{message.to}</p>\n      </div>\n      );\n      return items;\n    });\n\n    return (\n        <InfiniteScroll\n            pageStart={0}\n            loadMore={this.loadNextPage.bind(this)}\n            hasMore={this.state.hasMoreItems}\n            loader={loader}>\n\n            <div className=\"messageFeed\">\n                {items}\n            </div>\n        </InfiniteScroll>\n    );\n  }\n}\n\n// Return app\nfunction App() {\n  return (\n    <div className=\"App\">\n      <Headroom>\n        <div className=\"App-header\">\n          <img src={logo} className=\"App-logo\" alt=\"logo\" />\n          <h1>Mantra Health</h1>\n        </div>\n      </Headroom>\n      <div>\n        <h2>Messages</h2>\n        <SentMessages />\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}
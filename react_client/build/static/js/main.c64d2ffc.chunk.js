(window.webpackJsonptext_message_control_center=window.webpackJsonptext_message_control_center||[]).push([[0],{12:function(e,t,a){e.exports=a(28)},17:function(e,t,a){},18:function(e,t,a){},28:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),l=a(3),c=a.n(l),o=(a(17),a(4)),r=a(5),i=a(10),m=a(6),u=a(11),g=a(7),h=a.n(g),d=(a(18),a(8)),p=a.n(d),f=a(9),v=a.n(f),E="https://api.twilio.com",x=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(i.a)(this,Object(m.a)(t).call(this,e))).state={allMessages:[],nextPage:null,hasMoreItems:!0},a}return Object(u.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){var e=this;fetch("/messages").then((function(e){return e.json()})).then((function(t){return e.setState({allMessages:t.messages,nextPage:t.next_page_uri})})).catch((function(t){return e.setState({loaded:!0})}))}},{key:"loadNextPage",value:function(e){var t=this,a="";this.state.nextPage&&(a=E+this.state.nextPage);var n={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:a})};fetch("/messages",n).then((function(e){return e.json()})).then((function(e){if(e){var a=t.state.allMessages;e.messages.map((function(e){a.push(e)})),e.nextPage?t.setState({allMessages:a,nextPage:e.nextPage}):t.setState({hasMoreItems:!1})}})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){var e=s.a.createElement("p",{className:"loader"},"Loading messages..."),t=[];return this.state.allMessages.map((function(e){return t.push(s.a.createElement("div",{key:e.id,className:"message"},s.a.createElement("p",{className:"body"},e.body),s.a.createElement("p",{className:"date"},new Date(e.date_sent).toLocaleString()),s.a.createElement("p",{className:"rec"},e.to))),t})),s.a.createElement(v.a,{pageStart:0,loadMore:this.loadNextPage.bind(this),hasMore:this.state.hasMoreItems,loader:e},s.a.createElement("div",{className:"messageFeed"},t))}}]),t}(s.a.Component);var M=function(){return s.a.createElement("div",{className:"App"},s.a.createElement(p.a,null,s.a.createElement("div",{className:"App-header"},s.a.createElement("img",{src:h.a,className:"App-logo",alt:"logo"}),s.a.createElement("h1",null,"Mantra Health"))),s.a.createElement("div",null,s.a.createElement("h2",null,"Messages"),s.a.createElement(x,null)))};c.a.render(s.a.createElement(M,null),document.getElementById("root"))},7:function(e,t,a){e.exports=a.p+"static/media/logo.0a7ac69f.svg"}},[[12,1,2]]]);
//# sourceMappingURL=main.c64d2ffc.chunk.js.map
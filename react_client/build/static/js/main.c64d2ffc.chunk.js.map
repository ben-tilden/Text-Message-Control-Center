{"version":3,"sources":["App.js","index.js","logo.svg"],"names":["api","SentMessages","props","state","allMessages","nextPage","hasMoreItems","fetch","then","res","json","setState","messages","next_page_uri","catch","err","loaded","page","self","this","nextPageUrl","obj","method","headers","body","JSON","stringify","url","updatedMessages","map","message","push","console","log","loader","className","items","key","id","Date","date_sent","toLocaleString","to","pageStart","loadMore","loadNextPage","bind","hasMore","React","Component","App","src","logo","alt","ReactDOM","render","document","getElementById","module","exports"],"mappings":"6WAMMA,EACK,yBAILC,E,YACJ,WAAYC,GAAQ,IAAD,8BACf,4CAAMA,KACDC,MAAQ,CACXC,YAAa,GACbC,SAAU,KACVC,cAAc,GALD,E,iFAUE,IAAD,OAClBC,MAAM,aACHC,MAAK,SAAAC,GAAG,OAAIA,EAAIC,UAChBF,MAAK,SAAAC,GAAG,OAAI,EAAKE,SAAS,CACnBP,YAAaK,EAAIG,SACjBP,SAAUI,EAAII,mBAErBC,OAAM,SAACC,GAAD,OAAS,EAAKJ,SAAS,CAAEK,QAAQ,S,mCAI/BC,GACX,IAAIC,EAAOC,KACPC,EAAc,GACdD,KAAKhB,MAAME,WACbe,EAAcpB,EAAcmB,KAAKhB,MAAME,UAEzC,IAAMgB,EAAM,CACVC,OAAQ,OACRC,QAAS,CACP,eAAgB,oBAElBC,KAAMC,KAAKC,UAAU,CACnBC,IAAMP,KAGVb,MAAM,YAAac,GAChBb,MAAK,SAAAC,GAAG,OAAIA,EAAIC,UAChBF,MAAK,SAAAC,GACJ,GAAIA,EAAK,CACP,IAAImB,EAAkBV,EAAKf,MAAMC,YACjCK,EAAIG,SAASiB,KAAI,SAAAC,GACfF,EAAgBG,KAAKD,MAEnBrB,EAAIJ,SACNa,EAAKP,SAAS,CACZP,YAAawB,EACbvB,SAAUI,EAAIJ,WAGhBa,EAAKP,SAAS,CACZL,cAAc,QAKrBQ,OAAM,SAACC,GAASiB,QAAQC,IAAIlB,Q,+BAI/B,IAAMmB,EAAS,uBAAGC,UAAU,UAAb,uBAEXC,EAAQ,GAYZ,OAXAjB,KAAKhB,MAAMC,YAAYyB,KAAI,SAAAC,GAQzB,OAPAM,EAAML,KACJ,yBAAKM,IAAKP,EAAQQ,GAAIH,UAAU,WAChC,uBAAGA,UAAU,QAAQL,EAAQN,MAC7B,uBAAGW,UAAU,QAAQ,IAAII,KAAKT,EAAQU,WAAWC,kBACjD,uBAAGN,UAAU,OAAOL,EAAQY,MAGvBN,KAIL,kBAAC,IAAD,CACIO,UAAW,EACXC,SAAUzB,KAAK0B,aAAaC,KAAK3B,MACjC4B,QAAS5B,KAAKhB,MAAMG,aACpB4B,OAAQA,GAER,yBAAKC,UAAU,eACVC,Q,GAnFUY,IAAMC,WA4GlBC,MAjBf,WACE,OACE,yBAAKf,UAAU,OACb,kBAAC,IAAD,KACE,yBAAKA,UAAU,cACb,yBAAKgB,IAAKC,IAAMjB,UAAU,WAAWkB,IAAI,SACzC,+CAGJ,6BACE,wCACA,kBAAC,EAAD,SC5GRC,IAASC,OAAO,kBAAC,EAAD,MAASC,SAASC,eAAe,U,kBCLjDC,EAAOC,QAAU,IAA0B,mC","file":"static/js/main.c64d2ffc.chunk.js","sourcesContent":["import React from 'react';\nimport logo from './logo.svg';\nimport './App.css';\nimport Headroom from \"react-headroom\";\nimport InfiniteScroll from \"react-infinite-scroller\";\n\nconst api = {\n  baseUrl: 'https://api.twilio.com'\n};\n\n// Class for sent messages\nclass SentMessages extends React.Component {\n  constructor(props) {\n      super(props);\n      this.state = {\n        allMessages: [],\n        nextPage: null,\n        hasMoreItems: true\n      }\n  }\n\n  // Loads first page of messages\n  componentDidMount() {\n    fetch('/messages')\n      .then(res => res.json())\n      .then(res => this.setState({\n              allMessages: res.messages,\n              nextPage: res.next_page_uri\n            }))\n      .catch((err) => this.setState({ loaded: true }));\n  }\n\n  // Load more pages for Infinite Scroll\n  loadNextPage(page) {\n    var self = this;\n    let nextPageUrl = \"\";\n    if (this.state.nextPage) {\n      nextPageUrl = api.baseUrl + this.state.nextPage;\n    }\n    const obj = {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        url : nextPageUrl\n      })\n    };\n    fetch('/messages', obj)\n      .then(res => res.json())\n      .then(res => {\n        if (res) {\n          var updatedMessages = self.state.allMessages;\n          res.messages.map(message => {\n            updatedMessages.push(message);\n          })\n          if (res.nextPage) {\n            self.setState({\n              allMessages: updatedMessages,\n              nextPage: res.nextPage\n            });\n          } else {\n            self.setState({\n              hasMoreItems: false\n            });\n          }\n        }\n      })\n      .catch((err) => {console.log(err);});\n  }\n\n  render() {\n    const loader = <p className=\"loader\">Loading messages...</p>;\n\n    var items = [];\n    this.state.allMessages.map(message => {\n      items.push(\n        <div key={message.id} className=\"message\">\n        <p className=\"body\">{message.body}</p>\n        <p className=\"date\">{new Date(message.date_sent).toLocaleString()}</p>\n        <p className=\"rec\">{message.to}</p>\n      </div>\n      );\n      return items;\n    });\n\n    return (\n        <InfiniteScroll\n            pageStart={0}\n            loadMore={this.loadNextPage.bind(this)}\n            hasMore={this.state.hasMoreItems}\n            loader={loader}>\n\n            <div className=\"messageFeed\">\n                {items}\n            </div>\n        </InfiniteScroll>\n    );\n  }\n}\n\n// Return app\nfunction App() {\n  return (\n    <div className=\"App\">\n      <Headroom>\n        <div className=\"App-header\">\n          <img src={logo} className=\"App-logo\" alt=\"logo\" />\n          <h1>Mantra Health</h1>\n        </div>\n      </Headroom>\n      <div>\n        <h2>Messages</h2>\n        <SentMessages />\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n","module.exports = __webpack_public_path__ + \"static/media/logo.0a7ac69f.svg\";"],"sourceRoot":""}